<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>WebCam Set Up</title>
</head>
<body>
<table>
<tr><td rowspan="2">
<canvas height=500 width=500>

</canvas>
</td>
<td>
	Robot video goes here
</td>
</tr>
<tr>
<td valign="center">

<video id="v" autoplay></video>

</td>
</tr></table>
<script>
alert('called1');
window.addEventListener('DOMContentLoaded', function() {
    alert('called2');
	   var v = document.getElementById('v');
	   navigator.getUserMedia = (navigator.getUserMedia ||
	                             navigator.webkitGetUserMedia ||
	                             navigator.mozGetUserMedia ||
	                             navigator.msGetUserMedia);
	   if (navigator.getUserMedia) {
	      // Request access to video only
	      alert('called3'+navigator.getUserMedia);
	      navigator.getUserMedia(
	         {
	            video:true,
	            audio:true
	         },        
	         function(localMediaStream) {
	        	 alert('url sending');
	            var url = window.URL || window.webkitURL;
	            alert('object creating');
	            v.src = url ? url.createObjectURL(localMediaStream) : localMediaStream;
	            alert('playing');
	            v.play();
	            alert("end");
	         },
	         function(error) {
	            alert('Something went wrong. (error code ' + error.code + ')');
	            return;
	         }
	      );
	   }
	   else {
	      alert('Sorry, the browser you are using doesn\'t support getUserMedia');
	      return;
	   }
	});
</script>

</body>
</html>